{"ast":null,"code":"import { filter, map } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/agent.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction NewConnectionComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"div\", 8)(3, \"label\");\n    i0.ɵɵtext(4, \"Copy the following invitation object:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 9);\n    i0.ɵɵelement(6, \"textarea\", 10, 11);\n    i0.ɵɵelementStart(8, \"div\", 12)(9, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function NewConnectionComponent_div_7_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const _r1 = i0.ɵɵreference(7);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.copy(_r1));\n    });\n    i0.ɵɵelement(10, \"i\", 14);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementStart(11, \"div\", 8)(12, \"label\");\n    i0.ɵɵtext(13, \"Alternatively copy the following invitation URL:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"div\", 9);\n    i0.ɵɵelement(15, \"input\", 15, 16);\n    i0.ɵɵelementStart(17, \"div\", 12)(18, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function NewConnectionComponent_div_7_Template_button_click_18_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const _r2 = i0.ɵɵreference(16);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.copy(_r2));\n    });\n    i0.ɵɵelement(19, \"i\", 14);\n    i0.ɵɵelementEnd()()()()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"value\", ctx_r0.invitationObject);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"value\", ctx_r0.invitationUrl);\n  }\n}\nexport class NewConnectionComponent {\n  constructor(agentService) {\n    this.agentService = agentService;\n    this.invitationObject = '';\n    this.invitationUrl = '';\n  }\n  ngOnInit() {}\n  copy(el) {\n    el.select();\n    document.execCommand('copy');\n  }\n  onSubmit() {\n    this.agentService.createInvitation(this.alias).pipe(\n    // filters out error respopnses\n    filter(invitation => !!invitation), map(invitation => {\n      this.invitation = invitation;\n      this.invitationObject = this.invitation && JSON.stringify(this.invitation.invitation, null, 4) || '';\n      this.invitationUrl = this.invitation && this.invitation.invitation_url || '';\n    })).subscribe();\n  }\n  static #_ = this.ɵfac = function NewConnectionComponent_Factory(t) {\n    return new (t || NewConnectionComponent)(i0.ɵɵdirectiveInject(i1.AgentService));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewConnectionComponent,\n    selectors: [[\"app-new-connection\"]],\n    decls: 8,\n    vars: 3,\n    consts: [[1, \"container\"], [\"autocomplete\", \"false\"], [\"for\", \"alias\"], [\"id\", \"alias\", \"type\", \"text\", \"name\", \"alias\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-lg\", \"btn-block\", \"mb-3\", 3, \"disabled\", \"click\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-12\"], [1, \"form-group\"], [1, \"input-group\"], [\"cols\", \"30\", \"rows\", \"10\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"invitationObjectEl\", \"\"], [1, \"input-group-append\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"click\"], [1, \"fas\", \"fa-clipboard\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [\"invitationUrlEl\", \"\"]],\n    template: function NewConnectionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"form\", 1)(2, \"label\", 2);\n        i0.ɵɵtext(3, \"Connection alias\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"input\", 3);\n        i0.ɵɵlistener(\"ngModelChange\", function NewConnectionComponent_Template_input_ngModelChange_4_listener($event) {\n          return ctx.alias = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function NewConnectionComponent_Template_button_click_5_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(6, \"Create New Invitation\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(7, NewConnectionComponent_div_7_Template, 20, 2, \"div\", 5);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.alias);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", ctx.invitation);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.invitation);\n      }\n    },\n    dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.NgModel, i3.NgForm],\n    styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"names":["filter","map","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","NewConnectionComponent_div_7_Template_button_click_9_listener","ɵɵrestoreView","_r4","_r1","ɵɵreference","ctx_r3","ɵɵnextContext","ɵɵresetView","copy","NewConnectionComponent_div_7_Template_button_click_18_listener","_r2","ctx_r5","ɵɵadvance","ɵɵproperty","ctx_r0","invitationObject","invitationUrl","NewConnectionComponent","constructor","agentService","ngOnInit","el","select","document","execCommand","onSubmit","createInvitation","alias","pipe","invitation","JSON","stringify","invitation_url","subscribe","_","ɵɵdirectiveInject","i1","AgentService","_2","selectors","decls","vars","consts","template","NewConnectionComponent_Template","rf","ctx","NewConnectionComponent_Template_input_ngModelChange_4_listener","$event","NewConnectionComponent_Template_button_click_5_listener","ɵɵtemplate","NewConnectionComponent_div_7_Template"],"sources":["/home/andy/University/masters-thesis/ddos-data-mesh-network/controllers/acme-controller/src/app/components/connections/new-connection/new-connection.component.ts","/home/andy/University/masters-thesis/ddos-data-mesh-network/controllers/acme-controller/src/app/components/connections/new-connection/new-connection.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { AgentService } from 'src/app/services/agent.service';\nimport { filter, map } from 'rxjs';\n\n@Component({\n  selector: 'app-new-connection',\n  templateUrl: './new-connection.component.html',\n  styleUrls: ['./new-connection.component.scss']\n})\nexport class NewConnectionComponent {\n  public alias: string;\n  public invitation: any;\n  public invitationObject = '';\n  public invitationUrl = '';\n\n  constructor(private agentService: AgentService) { }\n\n  ngOnInit() {\n  }\n\n  copy(el: HTMLInputElement | HTMLTextAreaElement) {\n    el.select();\n    document.execCommand('copy');\n  }\n\n  onSubmit() {\n\n    this.agentService.createInvitation(this.alias)\n      .pipe(\n        // filters out error respopnses\n        filter((invitation: any) => !!invitation),\n        map((invitation: any) => {\n          this.invitation = invitation;\n          this.invitationObject = this.invitation && JSON.stringify(this.invitation.invitation, null, 4) || '';\n          this.invitationUrl = this.invitation && this.invitation.invitation_url || '';\n        })\n      )\n      .subscribe();\n  }\n\n}\n","<div class=\"container\">\n    <form autocomplete=\"false\">\n        <label for=\"alias\">Connection alias</label>\n        <input id=\"alias\" class=\"form-control\" type=\"text\" name=\"alias\" [(ngModel)]=\"alias\" />\n        <button type=\"button\" class=\"btn btn-primary btn-lg btn-block mb-3\" (click)=\"onSubmit()\"\n            [disabled]=\"invitation\">Create New Invitation</button>\n    </form>\n\n    <div *ngIf=\"invitation\" class=\"row\">\n        <div class=\"col-12\">\n            <div class=\"form-group\">\n                <label>Copy the following invitation object:</label>\n                <div class=\"input-group\">\n                    <textarea class=\"form-control\" cols=\"30\" rows=\"10\" [value]=\"invitationObject\" #invitationObjectEl\n                        readonly></textarea>\n                    <div class=\"input-group-append\">\n                        <button class=\"btn btn-outline-secondary\" type=\"button\" (click)=\"copy(invitationObjectEl)\">\n                            <i class=\"fas fa-clipboard\"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div class=\"form-group\">\n                <label>Alternatively copy the following invitation URL:</label>\n                <div class=\"input-group\">\n                    <input type=\"text\" class=\"form-control\" [value]=\"invitationUrl\" #invitationUrlEl readonly>\n                    <div class=\"input-group-append\">\n                        <button class=\"btn btn-outline-secondary\" type=\"button\" (click)=\"copy(invitationUrlEl)\">\n                            <i class=\"fas fa-clipboard\"></i>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}